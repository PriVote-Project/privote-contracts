import { ethers } from "hardhat";
import * as maciContract from "../deployments/localhost/Privote.json";

async function main() {
  const [deployer] = await ethers.getSigners();
  const maci = new ethers.Contract(maciContract.address, maciContract.abi, deployer);

  // Define the public key, signUpGatekeeperData, and initialVoiceCreditProxyData
  const pubKey = {
    x: "7241728685366863917285668999330892372683604660822807916359904479991538689337",
    y: "15227291638174786727851591747573626451311594421326528332958841360833178655475",
  };
  const signUpGatekeeperData =
    "0x00000000000000000000000000000000000000000000000000000000000011b6055a752ae223d1be3c0fb1ab4396c04ee586ddd993119171a46ef850443f58d90000000000000000000000000000000000000000000000000000000067535ec81621c5aa4ec240e764ddd9bfae2fcd46419e89695f58560e65b3f97c56ff419e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000086d1a1a48e9b0aaedd8e59b5f9df9597465ea9012ff59220f97e560f9e61c0a2611ec83fe95a6840b39dde4452fc9a5839af6bc43ab9cc68c3d49aa538d616f236fe9f80fb8ee6d349904c21c22d1176f5a26ad628d74364629eb80be5b3ccb002781d470a0836dde47324a8391b1994336439a9b41240c80c2cbb93ebc40ed14f95313db78056b410df996cc3d6fc5bb0ace6c5e49e47415ba893563696a062da28fdb17b563bac8b13af1d4d3425a265521d022841f566935195b7991cdf4013fd949c0bb00397b6ee82d51941838d1416aa3ecba29856f0be420309ab4641ce5ae832836a60f5af3d1664051ff6566de611aa6a25c22a4bf9543dde855a3";
  const initialVoiceCreditProxyData = "0x";

  // run the signUp function
  const signUpTx = await maci.signUp(pubKey, signUpGatekeeperData, initialVoiceCreditProxyData);

  await signUpTx.wait(1);
  console.log("User signed up");
}

main().catch(error => {
  console.error(error);
  process.exitCode = 1;
});
